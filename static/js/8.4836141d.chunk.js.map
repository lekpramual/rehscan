{"version":3,"sources":["assets/ico/003-fingerprint-2.svg","components/scans/components/chkinout/arePoints.js","components/scans/components/chkinout/ScanInOutMessage.js","components/scans/components/chkinout/ScanInOutList.js","components/scans/components/common/ScanInOut.js","components/scans/components/chkinout/ScanInOut.js","components/scans/containers/ScanInOut.js"],"names":["module","exports","arePointsNear","checkPoint","centerPoint","km","ky","kx","Math","cos","PI","lat","dx","abs","lng","dy","sqrt","ScanInOutMessage","props","className","style","marginBottom","alert","msg","geolocated","positionOptions","enableHighAccuracy","maximumAge","timeout","Infinity","userDecisionTimeout","useState","qrscan","setQrscan","setLatState","setLngState","useEffect","show","isGeolocationAvailable","isGeolocationEnabled","coords","latitude","toFixed","undefined","parseFloat","longitude","delay","onError","err","console","error","onScan","e","data","obj","JSON","parse","log","arePoints","confirm","handleScan","width","marginTop","textAlign","ScanInOut","padding","type","onClick","src","memberchkinout","alt","marginRight","marginLeft","paddingBottom","setMsg","setShow","onConfirm","isshow","setTimeout"],"mappings":"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","file":"static/js/8.4836141d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/003-fingerprint-2.2e6dfe5e.svg\";","function arePointsNear(checkPoint, centerPoint, km) {\n  var ky = 40000 / 360;\n  var kx = Math.cos((Math.PI * centerPoint.lat) / 180.0) * ky;\n  var dx = Math.abs(centerPoint.lng - checkPoint.lng) * kx;\n  var dy = Math.abs(centerPoint.lat - checkPoint.lat) * ky;\n\n  // console.log(dx * dx + dy * dy);\n  return Math.sqrt(dx * dx + dy * dy) <= km;\n}\n\nexport default arePointsNear;\n","import React from \"react\";\n\nconst ScanInOutMessage = (props) => {\n  return (\n    <div className=\"row\" style={{ marginBottom: 10 }}>\n      <div className=\"col-12\">\n        <div className={`${props.alert} alert-dismissible`}>\n          <h5>แจ้งเตือน !</h5>\n          {props.msg}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ScanInOutMessage;\n","import React, { useState, useEffect } from \"react\";\nimport arePoints from \"./arePoints\";\nimport QrReader from \"react-qr-reader\";\nimport { geolocated } from \"react-geolocated\";\n\nimport ScanInOutMessage from \"./ScanInOutMessage\";\n\nimport \"react-toastify/dist/ReactToastify.css\";\nconst ScanInOutList = (props) => {\n  const [qrscan, setQrscan] = useState([]);\n  const [latState, setLatState] = useState(0);\n  const [lngState, setLngState] = useState(0);\n\n  const handleScan = (data, lat, lng) => {\n    if (data !== null && data !== undefined) {\n      var obj = JSON.parse(data);\n      setQrscan(obj);\n      setLatState(lat);\n      setLngState(lng);\n\n      console.log(obj.latitude);\n      arePoints(\n        {\n          lat: lat,\n          lng: lng\n        },\n        {\n          lat: obj.latitude,\n          lng: obj.longitude\n        },\n        0.2\n      )\n        ? props.confirm(props.msg, false)\n        : props.confirm(props.msg, true);\n    }\n  };\n\n  const handleError = (err) => {\n    console.error(err);\n  };\n\n  useEffect(() => {}, [props.show, props.msg]);\n\n  return !props.isGeolocationAvailable ? (\n    <ScanInOutMessage\n      msg=\"--- เบราว์เซอร์ของคุณไม่รองรับ แนะนำ Chome---\"\n      alert=\"alert alert-warning\"\n    />\n  ) : !props.isGeolocationEnabled ? (\n    <div>\n      <ScanInOutMessage\n        msg=\"--- กรุณาเปิด GPS มือถือของท่าน &hellip; ---\"\n        alert=\"alert alert-warning\"\n      />\n    </div>\n  ) : props.coords ? (\n    <>\n      <div className=\"row\">\n        <div className=\"col-12\">\n          {props.coords.latitude.toFixed(4)} ||{\" \"}\n          {qrscan !== undefined ? parseFloat(qrscan.latitude).toFixed(4) : 0}\n          <br />\n          {props.coords.longitude.toFixed(4)} ||{\" \"}\n          {qrscan !== undefined ? parseFloat(qrscan.longitude).toFixed(4) : 0}\n          <br />\n          {props.show ? (\n            <QrReader\n              delay={300}\n              onError={handleError}\n              onScan={(e) =>\n                handleScan(\n                  e,\n                  props.coords.latitude.toFixed(4),\n                  props.coords.longitude.toFixed(4)\n                )\n              }\n              style={{ width: \"100%\" }}\n              // style={{ width: \"200px\", heigth: \"200px\" }}\n            />\n          ) : (\n            \"\"\n          )}\n        </div>\n      </div>\n\n      <div className=\"row\" style={{ marginTop: 10 }}>\n        {arePoints(\n          {\n            lat: props.coords.latitude.toFixed(4),\n            lng: props.coords.longitude.toFixed(4)\n          },\n          {\n            lat:\n              qrscan !== undefined ? parseFloat(qrscan.latitude).toFixed(4) : 0,\n            lng:\n              qrscan !== undefined ? parseFloat(qrscan.longitude).toFixed(4) : 0\n          },\n          0.3\n        ) ? (\n          <div className=\"col-12\">\n            {props.show ? (\n              <ScanInOutMessage\n                msg=\"---  ระยะห่างจากจุดสแกน ไม่เกิน 100 เมตร &hellip;---\"\n                alert=\"alert alert-warning\"\n              />\n            ) : (\n              <ScanInOutMessage\n                msg=\"บันทึกข้อมูลลงเวลาเรียบร้อย\"\n                alert=\"alert alert-success\"\n              />\n            )}\n          </div>\n        ) : (\n          <div className=\"col-12\" style={{ textAlign: \"center\" }}>\n            <ScanInOutMessage\n              msg=\"---  ระยะห่างจากจุดสแกน ไม่เกิน 100 เมตร &hellip; ---\"\n              alert=\"alert alert-warning\"\n            />\n          </div>\n        )}\n      </div>\n    </>\n  ) : (\n    <div className=\"col-12\" style={{ textAlign: \"center\" }}>\n      <ScanInOutMessage\n        msg=\"--- กำลังค้นหาตำแหน่ง &hellip; ---\"\n        alert=\"alert alert-info\"\n      />\n    </div>\n  );\n};\n\nexport default geolocated({\n  positionOptions: {\n    enableHighAccuracy: true,\n    maximumAge: 100,\n    timeout: Infinity\n  },\n  userDecisionTimeout: 5000\n})(ScanInOutList);\n","import React from \"react\";\nimport memberchkinout from \"../../../../assets/ico/003-fingerprint-2.svg\";\n\nfunction ScanInOut(props) {\n  return (\n    <div className=\"card-header\">\n      <div className=\"row\">\n        <div className=\"col-md-6 col-12\" style={{ padding: 2 }}>\n          <button\n            type=\"submit\"\n            className=\"btn btn-default btn-lg btn-block\"\n            onClick={() => props.confirm(\"chkin\", true)}\n          >\n            <img\n              src={memberchkinout}\n              alt=\"memberchk in\"\n              style={{\n                width: 50,\n                marginRight: 5,\n                marginLeft: -7,\n                paddingBottom: 2\n              }}\n            />\n            <p>สแกนเข้า</p>\n          </button>\n        </div>\n        <div className=\"col-md-6 col-12\" style={{ padding: 2 }}>\n          <button\n            type=\"submit\"\n            className=\"btn btn-default btn-lg btn-block\"\n            onClick={() => props.confirm(\"chkout\", true)}\n          >\n            <img\n              src={memberchkinout}\n              alt=\"memberchk out\"\n              style={{\n                width: 50,\n                marginRight: 5,\n                marginLeft: -7,\n                paddingBottom: 2\n              }}\n            />\n            <p>สแกนออก</p>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ScanInOut;\n","import React, { useEffect, useState } from \"react\";\nimport ScanList from \"./ScanInOutList\";\nimport SearchMember from \"../common/ScanInOut\";\n\nfunction ScanInOut() {\n  const [msg, setMsg] = useState(\"\");\n  const [show, setShow] = useState(true);\n  // Confirm From Search\n  const onConfirm = (msg, isshow) => {\n    console.log(msg, isshow);\n    setMsg(msg);\n    setShow(isshow);\n  };\n\n  useEffect(() => {\n    setTimeout(() => {\n      console.log(\"Reload ScanInOut\");\n      setShow(false);\n    }, 10000);\n  }, [show]);\n\n  return (\n    <section className=\"content\" style={{ marginTop: -16 }}>\n      <div className=\"container-fluid\">\n        <div className=\"card\">\n          <SearchMember confirm={onConfirm} />\n          <div className=\"card-body\">\n            {msg === \"chkin\" || msg === \"chkout\" ? (\n              <ScanList msg={msg} show={show} confirm={onConfirm} />\n            ) : (\n              \"\"\n            )}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nexport default ScanInOut;\n","import React from \"react\";\nimport ScanComponent from \"../components/chkinout/ScanInOut\";\nfunction ScanInOut() {\n  return (\n    <div>\n      <ScanComponent />\n    </div>\n  );\n}\n\nexport default ScanInOut;\n"],"sourceRoot":""}