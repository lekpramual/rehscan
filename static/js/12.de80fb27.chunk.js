(this.webpackJsonprehscan=this.webpackJsonprehscan||[]).push([[12],{103:function(e,t,a){"use strict";var n=a(0),l=a.n(n);t.a=function(e){return l.a.createElement("div",{className:"row",style:{marginBottom:10}},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"".concat(e.alert," alert-dismissible")},l.a.createElement("h5",null,"\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19 !"),e.msg)))}},271:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(85),c=a.n(r),o=a(86),s=a(91),i=a.n(s),m=a(75),u=a(247),d=a.n(u),f=a(141),E=a.n(f),p=a(26),v=a(13),b=a(27),g=a(76),y=a(77),N=a(263),h=a(257),x=function(e){Object(N.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).state={records:[]},n}return Object(y.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){console.log("5555"),console.log(e.record);var t=[];e.record!==this.state.records&&(console.log("666"),t=e.record,console.log(t),this.setState({records:t}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"p-5"},l.a.createElement("div",Object(b.a)({className:"row",type:"flex",justify:"space-between"},"className","py-2 text-muted"),l.a.createElement("div",null,l.a.createElement("middle",null,"REH-20210511")),l.a.createElement("div",{className:"text-right"},l.a.createElement("middle",null,"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48 11/5/2564"))),l.a.createElement("div",{className:"py-2 text-muted",type:"flex",justify:"center",style:{marginTop:"40px"}},l.a.createElement("div",{className:"text-center"})),l.a.createElement("div",{className:"py-2 text-muted",type:"flex",justify:"center",style:{marginTop:"-10px"}},l.a.createElement("div",{className:"text-center"},l.a.createElement("h2",null,"\u0e42\u0e23\u0e07\u0e1e\u0e22\u0e32\u0e1a\u0e32\u0e25\u0e23\u0e49\u0e2d\u0e22\u0e40\u0e2d\u0e47\u0e14"))),l.a.createElement("div",{className:"py-2 text-muted",type:"flex",justify:"center",style:{marginTop:"-20px"}},l.a.createElement("div",{className:"text-center"},l.a.createElement("h3",null,this.state.records.scan_location))),l.a.createElement("div",{className:"py-2 text-muted",type:"flex",justify:"center",style:{marginTop:"-20px"}},l.a.createElement("div",{className:"text-center"},l.a.createElement(E.a,{id:"myqr",value:"".concat(JSON.stringify(this.state.records)),size:320,includeMargin:!0}))))}}]),a}(l.a.Component),j=function(){var e=Object(n.useRef)(),t=Object(p.b)(),a=Object(n.useState)([]),r=Object(m.a)(a,2),c=r[0],o=r[1],s=Object(p.c)((function(e){return e.scanlocation.indexData})),i=Object(p.c)((function(e){return e.scanlocation.indexStatus})),u=Object(p.c)((function(e){return e.scanlocation.indexFailure}));var f=function(){var e,t=[];return s.map((function(a){return 0===a.data.length?e=!1:(e=!0,t=a.data,{iscount:e,isdata:t})})),{iscount:e,isdata:t}}(),E=f.iscount,b=f.isdata;return Object(n.useEffect)((function(){t(Object(v.h)())}),[c]),l.a.createElement("div",null,JSON.stringify(c),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 table table-responsive "},l.a.createElement("table",{className:"table table-bordered table-hover text-nowrap"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,"\u0e25\u0e33\u0e14\u0e31\u0e1a"),l.a.createElement("td",null,"\u0e25\u0e30\u0e15\u0e34\u0e08\u0e39\u0e14"),l.a.createElement("td",null,"\u0e25\u0e2d\u0e07\u0e15\u0e34\u0e08\u0e39\u0e14"),l.a.createElement("td",null,"\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48"),l.a.createElement("td",null,"\u0e2a\u0e16\u0e32\u0e19\u0e30"),l.a.createElement("td",null,"\u0e04\u0e33\u0e2a\u0e31\u0e48\u0e07"))),l.a.createElement("tbody",null,E?b.map((function(t,a){return l.a.createElement("tr",{key:t.scan_id},l.a.createElement("td",null,a+1),l.a.createElement("td",null,t.latitude),l.a.createElement("td",null,t.longitude),l.a.createElement("td",null,t.scan_location),l.a.createElement("td",null,1===t.status_id?l.a.createElement("span",{className:"badge bg-success"},"\u0e40\u0e1b\u0e34\u0e14\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19"):l.a.createElement("span",{className:"badge bg-danger"},"\u0e1b\u0e34\u0e14\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19")),l.a.createElement("td",null,l.a.createElement(d.a,{trigger:function(){return l.a.createElement("a",{href:"javascript:;"},l.a.createElement("button",{className:"btn btn-default",onClick:function(){return o(t)}},l.a.createElement("i",{className:"fas fa-qrcode"})))},content:function(){return e.current},pageStyle:"@page { size: 11.694in 8.264in landscape} "})))})):l.a.createElement("tr",{key:"emtpydata"},l.a.createElement("td",{style:{verticalAlign:"middle"},colSpan:"7",className:"text-center"},"loading"===i?l.a.createElement("div",{className:"overlay"},l.a.createElement("i",{className:"fas fa-2x fa-sync-alt fa-spin"})):"failed"===i?l.a.createElement("p",{className:"text-danger"},u):"--- \u0e44\u0e21\u0e48\u0e21\u0e35\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25 ---")))))),l.a.createElement(x,{ref:e,record:c}))},O=a(71),w=a.n(O),k=a(268),S=a(273),T=a(102),F=a(103);var C=Object(T.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3})((function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(!1),s=Object(m.a)(o,2),i=s[0],u=s[1],d=function(){return u(!1)},f=function(t){t.preventDefault(),function(){var e=!0;return""===r&&(c(""),e=!1),e}()&&(e.confirm(e.coords.latitude.toFixed(4),e.coords.longitude.toFixed(4),r),u(!1),c(""))};return Object(n.useEffect)((function(){console.log("Loading ...")}),[i]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row",style:{marginBottom:10}},l.a.createElement("div",{className:"col-12",style:{textAlign:"right"}},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return u(!0)}},l.a.createElement("i",{className:"fas fa-plus"})," \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e08\u0e38\u0e14\u0e2a\u0e41\u0e01\u0e19"," "))),e.isGeolocationAvailable?e.isGeolocationEnabled?e.coords?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement(k.a,{show:i,onHide:d},l.a.createElement(k.a.Header,{closeButton:!0},l.a.createElement(k.a.Title,null,"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e08\u0e38\u0e14\u0e2a\u0e41\u0e01\u0e19")),l.a.createElement(k.a.Body,null,l.a.createElement("form",{onSubmit:function(e){return f(e)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"InputMember",className:"col-form-label"}," ","\u0e25\u0e30\u0e15\u0e34\u0e08\u0e39\u0e14"),l.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u0e25\u0e30\u0e15\u0e34\u0e08\u0e39\u0e14",value:e.coords.latitude.toFixed(4),disabled:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"InputMember",className:"col-form-label"}," ","\u0e25\u0e2d\u0e07\u0e15\u0e34\u0e08\u0e39\u0e14"),l.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u0e25\u0e2d\u0e07\u0e15\u0e34\u0e08\u0e39\u0e14",value:e.coords.longitude.toFixed(4),disabled:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"InputMember",className:"col-form-label"}," ","\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48 ",r.isvalid),l.a.createElement("input",{type:"text",className:w()("form-control",{"form-control is-invalid":!1===r.isvalid}),placeholder:"\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48",value:r,onChange:function(e){return c(e.target.value)}})))),l.a.createElement(k.a.Footer,{className:"modal-footer justify-content-between p-0"},l.a.createElement(S.a,{variant:"secondary",onClick:d},"\u0e1b\u0e34\u0e14"),l.a.createElement(S.a,{variant:"primary",onClick:function(e){return f(e)},disabled:""===r},"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01"))))):l.a.createElement("div",{className:"col-12",style:{textAlign:"center"}},l.a.createElement(F.a,{msg:"--- \u0e01\u0e33\u0e25\u0e31\u0e07\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e15\u0e33\u0e41\u0e2b\u0e19\u0e48\u0e07 \u2026 ---",alert:"alert alert-info"})):l.a.createElement(F.a,{msg:"--- \u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e1b\u0e34\u0e14 GPS \u0e21\u0e37\u0e2d\u0e16\u0e37\u0e2d\u0e02\u0e2d\u0e07\u0e17\u0e48\u0e32\u0e19 \u2026 ---",alert:"alert alert-warning"}):l.a.createElement(F.a,{msg:"--- \u0e40\u0e1a\u0e23\u0e32\u0e27\u0e4c\u0e40\u0e0b\u0e2d\u0e23\u0e4c\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e44\u0e21\u0e48\u0e23\u0e2d\u0e07\u0e23\u0e31\u0e1a \u0e41\u0e19\u0e30\u0e19\u0e33 Chome---",alert:"alert alert-warning"}))})),B=a(72);var I=function(){var e=Object(p.b)(),t=new B.a("http://localhost:3000/");return Object(n.useEffect)((function(){t.loggedIn()||window.location.replace("/rehscan/#/scan/member-register")}),[t,e]),l.a.createElement("section",{className:"content",style:{marginTop:-16}},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body "},l.a.createElement(C,{confirm:function(t,a,n){var l={lat:t,lon:a,scanName:n};new Promise((function(t,a){function n(){return r.apply(this,arguments)}function r(){return(r=Object(o.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Object(v.g)(l)).then((function(e){return e[0].msg}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:"created successful"===e.sent?(setTimeout((function(){window.location.reload()}),1600),t(!0)):a(!1);case 4:case"end":return e.stop()}}),e)})))()})).then((function(e){e?i.a.fire({icon:"success",title:"\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08",text:"\u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e08\u0e38\u0e14\u0e2a\u0e41\u0e01\u0e19\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22",showConfirmButton:!1,timer:1500}):i.a.fire({icon:"warning",title:"\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",text:"\u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",showConfirmButton:!1,timer:1500})})).catch((function(e){i.a.fire({icon:"error",title:"\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",text:"\u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",showConfirmButton:!1,timer:1500})}))}}),l.a.createElement(j,null)))))))};t.default=function(){return l.a.createElement("div",null,l.a.createElement(I,null))}},72:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(76),l=a(77),r=a(78),c=a(79),o=a.n(c),s=function(){function e(){Object(n.a)(this,e)}return Object(l.a)(e,[{key:"loggedIn",value:function(){return!!this.getToken()}},{key:"setToken",value:function(e){var t=o()(e,"secret");localStorage.setItem("id_token",t)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"getProfile",value:function(){return Object(r.a)(this.getToken())}}]),e}()}}]);
//# sourceMappingURL=12.de80fb27.chunk.js.map