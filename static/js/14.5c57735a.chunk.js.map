{"version":3,"sources":["components/scans/components/common/Message.js","components/scans/components/locaction/LocactionList.js","components/scans/components/locaction/LocactionAdd.js","components/scans/components/locaction/Locaction.js","components/scans/containers/Locaction.js","managers/AuthService.js","components/scans/components/common/profile.js"],"names":["Message","props","className","style","marginBottom","alert","msg","LocactionList","dispatch","useDispatch","state","useSelector","scanlocation","indexData","indexStatus","indexFailure","iscount","isdata","map","rs","data","length","isCheckData","useEffect","indexLocation","index","key","scan_id","latitude","longitude","scan_location","status_id","to","pathname","verticalAlign","colSpan","geolocated","positionOptions","enableHighAccuracy","userDecisionTimeout","useState","location","setLocation","show","setShow","handleClose","handleSubmit","e","preventDefault","isGood","formIsValidSearch","confirm","coords","toFixed","console","log","textAlign","type","onClick","isGeolocationAvailable","isGeolocationEnabled","Modal","onHide","Header","closeButton","Title","Body","onSubmit","htmlFor","placeholder","value","disabled","isvalid","classNames","onChange","target","Footer","Button","variant","Locaction","marginTop","lat","lon","scanName","Promise","resolve","reject","createMsg","a","createLocation","then","res","setTimeout","window","reload","status","Swal","fire","icon","title","text","showConfirmButton","timer","catch","AuthService","this","getToken","jwt","sign","localStorage","setItem","getItem","decode","profile","Auth","loggedIn","getProfile","name"],"mappings":"qGAAA,oBAeeA,IAbC,SAACC,GACf,OACE,yBAAKC,UAAU,MAAMC,MAAO,CAAEC,aAAc,KAC1C,yBAAKF,UAAU,UACb,yBAAKA,UAAS,UAAKD,EAAMI,MAAX,uBACZ,wFACCJ,EAAMK,S,8HCyGFC,EAzGO,WACpB,IAAMC,EAAWC,cAEXC,EAAQC,aAAY,SAACD,GAAD,OAAWA,EAAME,aAAaC,aAClDC,EAAcH,aAAY,SAACD,GAAD,OAAWA,EAAME,aAAaE,eACxDC,EAAeJ,aAAY,SAACD,GAAD,OAAWA,EAAME,aAAaG,gBALrC,MAO1B,WACE,IAAIC,EACAC,EAAS,GAWb,OAVAP,EAAMQ,KAAI,SAACC,GACT,OAAuB,IAAnBA,EAAGC,KAAKC,OACVL,GAAU,GAGVA,GAAU,EACVC,EAASE,EAAGC,KACL,CAAEJ,UAASC,cAGf,CAAED,UAASC,UAGQK,GAApBN,EAvBkB,EAuBlBA,QAASC,EAvBS,EAuBTA,OAMjB,OAJAM,qBAAU,WACRf,EAASgB,iBACR,CAAChB,IAGF,6BACE,yBAAKN,UAAU,OACb,yBAAKA,UAAU,kCACb,2BAAOA,UAAU,gDACf,+BACE,4BACE,8DACA,0EACA,gFACA,0EACA,8DACA,sEAGJ,+BACGc,EACCC,EAAOC,KAAI,SAACC,EAAIM,GACd,OACE,wBAAIC,IAAKP,EAAGQ,SACV,4BAAKF,EAAQ,GACb,4BAAKN,EAAGS,UACR,4BAAKT,EAAGU,WACR,4BAAKV,EAAGW,eACR,4BACoB,IAAjBX,EAAGY,UACF,0BAAM7B,UAAU,oBAAhB,gEAEA,0BAAMA,UAAU,mBAAhB,2DAGJ,4BACE,kBAAC,IAAD,CACE8B,GAAI,CACFC,SAAS,6BACTvB,MAAOS,IAGT,4BACEjB,UAAU,mBAGV,uBAAGA,UAAU,yBAQzB,wBAAIwB,IAAI,aACN,wBACEvB,MAAO,CAAE+B,cAAe,UACxBC,QAAQ,IACRjC,UAAU,eAEO,YAAhBY,EACC,yBAAKZ,UAAU,WACb,uBAAGA,UAAU,mCAEG,WAAhBY,EACF,uBAAGZ,UAAU,eAAea,GAE5B,qF,6DCgDPqB,2BAAW,CACxBC,gBAAiB,CACfC,oBAAoB,GAEtBC,oBAAqB,KAJRH,EA5If,SAAsBnC,GAAQ,IAAD,EACKuC,mBAAS,IADd,mBACpBC,EADoB,KACVC,EADU,OAEHF,oBAAS,GAFN,mBAEpBG,EAFoB,KAEdC,EAFc,KAIrBC,EAAc,kBAAMD,GAAQ,IAa5BE,EAAe,SAACC,GACpBA,EAAEC,iBAVsB,WACxB,IAAIC,GAAS,EAKb,MAJiB,KAAbR,IACFC,EAAY,IACZO,GAAS,GAEJA,EAKHC,KACFjD,EAAMkD,QACJlD,EAAMmD,OAAOxB,SAASyB,QAAQ,GAC9BpD,EAAMmD,OAAOvB,UAAUwB,QAAQ,GAC/BZ,GAIFG,GAAQ,GACRF,EAAY,MAQhB,OAJAnB,qBAAU,WACR+B,QAAQC,IAAI,iBACX,CAACZ,IAGF,oCACE,yBAAKzC,UAAU,MAAMC,MAAO,CAAEC,aAAc,KAC1C,yBAAKF,UAAU,SAASC,MAAO,CAAEqD,UAAW,UAC1C,4BACEC,KAAK,SACLvD,UAAU,kBACVwD,QAtCS,kBAAMd,GAAQ,KAwCvB,uBAAG1C,UAAU,gBALf,4EAK6C,OAK/CD,EAAM0D,uBAKH1D,EAAM2D,qBAKP3D,EAAMmD,OACR,yBAAKlD,UAAU,OACb,yBAAKA,UAAU,UACb,kBAAC2D,EAAA,EAAD,CAAOlB,KAAMA,EAAMmB,OAAQjB,GACzB,kBAACgB,EAAA,EAAME,OAAP,CAAcC,aAAW,GACvB,kBAACH,EAAA,EAAMI,MAAP,kFAEF,kBAACJ,EAAA,EAAMK,KAAP,KACE,0BAAMC,SAAU,SAACpB,GAAD,OAAOD,EAAaC,KAClC,yBAAK7C,UAAU,cACb,2BAAOkE,QAAQ,cAAclE,UAAU,kBACpC,IADH,8CAIA,2BACEuD,KAAK,OACLvD,UAAU,eACVmE,YAAY,6CACZC,MAAOrE,EAAMmD,OAAOxB,SAASyB,QAAQ,GACrCkB,UAAQ,KAGZ,yBAAKrE,UAAU,cACb,2BAAOkE,QAAQ,cAAclE,UAAU,kBACpC,IADH,oDAIA,2BACEuD,KAAK,OACLvD,UAAU,eACVmE,YAAY,mDACZC,MAAOrE,EAAMmD,OAAOvB,UAAUwB,QAAQ,GACtCkB,UAAQ,KAGZ,yBAAKrE,UAAU,cACb,2BAAOkE,QAAQ,cAAclE,UAAU,kBACpC,IADH,8CAEWuC,EAAS+B,SAEpB,2BACEf,KAAK,OAELvD,UAAWuE,IAAW,eAAgB,CACpC,2BAAgD,IAArBhC,EAAS+B,UAEtCH,YAAY,6CACZC,MAAO7B,EACPiC,SAAU,SAAC3B,GAAD,OAAOL,EAAYK,EAAE4B,OAAOL,aAK9C,kBAACT,EAAA,EAAMe,OAAP,CAAc1E,UAAU,4CACtB,kBAAC2E,EAAA,EAAD,CAAQC,QAAQ,YAAYpB,QAASb,GAArC,sBAGA,kBAACgC,EAAA,EAAD,CACEC,QAAQ,UACRpB,QAAS,SAACX,GAAD,OAAOD,EAAaC,IAC7BwB,SAAuB,KAAb9B,GAHZ,4CAYR,yBAAKvC,UAAU,SAASC,MAAO,CAAEqD,UAAW,WAC1C,kBAAC,IAAD,CACElD,IAAI,wHACJD,MAAM,sBA5EV,kBAAC,IAAD,CACEC,IAAI,2JACJD,MAAM,wBAPR,kBAAC,IAAD,CACEC,IAAI,2MACJD,MAAM,4B,QCgCD0E,MAnFf,WACE,IAAMvE,EAAWC,cA+DjB,OAFAc,qBAAU,cAAU,IAGlB,6BAASrB,UAAU,UAAUC,MAAO,CAAE6E,WAAY,KAChD,yBAAK9E,UAAU,mBACb,kBAAC,IAAD,MACA,yBAAKA,UAAU,OACb,yBAAKA,UAAU,UACb,yBAAKA,UAAU,QACb,yBAAKA,UAAU,cACb,kBAAC,EAAD,CAAciD,QAnEV,SAACvB,EAAUC,EAAWY,GACtC,IAAMrB,EAAO,CACX6D,IAAKrD,EACLsD,IAAKrD,EACLsD,SAAU1C,GAEC,IAAI2C,SAAQ,SAAUC,EAASC,GAAS,SACpCC,IADmC,2EAClD,sBAAAC,EAAA,sEACehF,EAASiF,YAAerE,IAAOsE,MAAK,SAACC,GAChD,OAAOA,EAAI,GAAGrF,OAFlB,oFADkD,sBAOlD,sBAAC,sBAAAkF,EAAA,sEACuBD,IADvB,OAEmB,uBAFnB,QAGGK,YAAW,WACTC,OAAOpD,SAASqD,WACf,MACHT,GAAQ,IAERC,GAAO,GARV,0CAAD,MAcKI,MAAK,SAACK,GACXA,EACIC,IAAKC,KAAK,CAERC,KAAM,UACNC,MAAO,uCACPC,KAAM,yJACNC,mBAAmB,EACnBC,MAAO,OAETN,IAAKC,KAAK,CAERC,KAAM,UACNC,MAAO,6CACPC,KAAM,mGACNC,mBAAmB,EACnBC,MAAO,UAEZC,OAAM,SAACxD,GACRiD,IAAKC,KAAK,CAERC,KAAM,QACNC,MAAO,6CACPC,KAAM,mGACNC,mBAAmB,EACnBC,MAAO,aAgBC,kBAAC,EAAD,aCzEDvB,UARf,WACE,OACE,6BACE,kBAAC,EAAD,S,+GCFeyB,E,mGAIjB,QADcC,KAAKC,a,+BAIZtF,GACP,IACMuF,EAAMC,IAAKxF,EADF,UAGfyF,aAAaC,QAAQ,WAAYH,K,iCAIjC,OAAOE,aAAaE,QAAQ,c,mCAI5B,OAAOC,YAAOP,KAAKC,gB,sCCtBvB,8DAEaO,EAAU,WACrB,IAAMC,EAAO,IAAIV,IAAY,0BAC7B,OACE,yBAAKtG,UAAU,OACb,yBAAKA,UAAU,UACb,yBAAKA,UAAU,QACb,yBAAKA,UAAU,YAAYC,MAAO,CAAEqD,UAAW,WAC7C,0BAAMtD,UAAU,cACd,uBAAGA,UAAU,gBAAiB,IAC5BgH,EAAKC,WAAkBD,EAAKE,aAAaC,KAAvB","file":"static/js/14.5c57735a.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Message = (props) => {\n  return (\n    <div className=\"row\" style={{ marginBottom: 10 }}>\n      <div className=\"col-12\">\n        <div className={`${props.alert} alert-dismissible`}>\n          <h5>แจ้งเตือน !</h5>\n          {props.msg}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Message;\n","import React, { useEffect } from \"react\";\n\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { indexLocation } from \"../../../../reduxs/actions/ScanLocation\";\n\n// import { LocationToPrint } from \"./LocationToPrint\";\n\nconst LocactionList = () => {\n  const dispatch = useDispatch();\n\n  const state = useSelector((state) => state.scanlocation.indexData);\n  const indexStatus = useSelector((state) => state.scanlocation.indexStatus);\n  const indexFailure = useSelector((state) => state.scanlocation.indexFailure);\n\n  function isCheckData() {\n    let iscount;\n    var isdata = [];\n    state.map((rs) => {\n      if (rs.data.length === 0) {\n        iscount = false;\n        return iscount;\n      } else {\n        iscount = true;\n        isdata = rs.data;\n        return { iscount, isdata };\n      }\n    });\n    return { iscount, isdata };\n  }\n\n  const { iscount, isdata } = isCheckData();\n\n  useEffect(() => {\n    dispatch(indexLocation());\n  }, [dispatch]);\n\n  return (\n    <div>\n      <div className=\"row\">\n        <div className=\"col-12 table table-responsive \">\n          <table className=\"table table-bordered table-hover text-nowrap\">\n            <thead>\n              <tr>\n                <td>ลำดับ</td>\n                <td>ละติจูด</td>\n                <td>ลองติจูด</td>\n                <td>สถานที่</td>\n                <td>สถานะ</td>\n                <td>คำสั่ง</td>\n              </tr>\n            </thead>\n            <tbody>\n              {iscount ? (\n                isdata.map((rs, index) => {\n                  return (\n                    <tr key={rs.scan_id}>\n                      <td>{index + 1}</td>\n                      <td>{rs.latitude}</td>\n                      <td>{rs.longitude}</td>\n                      <td>{rs.scan_location}</td>\n                      <td>\n                        {rs.status_id === 1 ? (\n                          <span className=\"badge bg-success\">เปิดใช้งาน</span>\n                        ) : (\n                          <span className=\"badge bg-danger\">ปิดใช้งาน</span>\n                        )}\n                      </td>\n                      <td>\n                        <Link\n                          to={{\n                            pathname: `/scan/member-printlocation`,\n                            state: rs\n                          }}\n                        >\n                          <button\n                            className=\"btn btn-default\"\n                            // onClick={() => setRecord(rs)}\n                          >\n                            <i className=\"fas fa-qrcode\" />\n                          </button>\n                        </Link>\n                      </td>\n                    </tr>\n                  );\n                })\n              ) : (\n                <tr key=\"emtpydata\">\n                  <td\n                    style={{ verticalAlign: \"middle\" }}\n                    colSpan=\"7\"\n                    className=\"text-center\"\n                  >\n                    {indexStatus === \"loading\" ? (\n                      <div className=\"overlay\">\n                        <i className=\"fas fa-2x fa-sync-alt fa-spin\" />\n                      </div>\n                    ) : indexStatus === \"failed\" ? (\n                      <p className=\"text-danger\">{indexFailure}</p>\n                    ) : (\n                      \"--- ไม่มีข้อมูล ---\"\n                    )}\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LocactionList;\n","import React, { useEffect, useState } from \"react\";\nimport classNames from \"classnames\";\n\nimport { Modal, Button } from \"react-bootstrap\";\nimport { geolocated } from \"react-geolocated\";\n\nimport ScanInOutMessage from \"../common/Message\";\n\nfunction LocactionAdd(props) {\n  const [location, setLocation] = useState(\"\");\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  // handle from validate\n  const formIsValidSearch = () => {\n    let isGood = true;\n    if (location === \"\") {\n      setLocation(\"\");\n      isGood = false;\n    }\n    return isGood;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (formIsValidSearch()) {\n      props.confirm(\n        props.coords.latitude.toFixed(4),\n        props.coords.longitude.toFixed(4),\n        location\n      );\n\n      // Hide Popup\n      setShow(false);\n      setLocation(\"\");\n    }\n  };\n\n  useEffect(() => {\n    console.log(\"Loading ...\");\n  }, [show]);\n\n  return (\n    <>\n      <div className=\"row\" style={{ marginBottom: 10 }}>\n        <div className=\"col-12\" style={{ textAlign: \"right\" }}>\n          <button\n            type=\"button\"\n            className=\"btn btn-primary\"\n            onClick={handleShow}\n          >\n            <i className=\"fas fa-plus\" /> เพิ่มจุดสแกน{\" \"}\n          </button>\n        </div>\n      </div>\n\n      {!props.isGeolocationAvailable ? (\n        <ScanInOutMessage\n          msg=\"--- เบราว์เซอร์ของคุณไม่รองรับ แนะนำ Chome---\"\n          alert=\"alert alert-warning\"\n        />\n      ) : !props.isGeolocationEnabled ? (\n        <ScanInOutMessage\n          msg=\"--- กรุณาเปิด GPS มือถือของท่าน &hellip; ---\"\n          alert=\"alert alert-warning\"\n        />\n      ) : props.coords ? (\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <Modal show={show} onHide={handleClose}>\n              <Modal.Header closeButton>\n                <Modal.Title>เพิ่มจุดสแกน</Modal.Title>\n              </Modal.Header>\n              <Modal.Body>\n                <form onSubmit={(e) => handleSubmit(e)}>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"InputMember\" className=\"col-form-label\">\n                      {\" \"}\n                      ละติจูด\n                    </label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"ละติจูด\"\n                      value={props.coords.latitude.toFixed(4)}\n                      disabled\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"InputMember\" className=\"col-form-label\">\n                      {\" \"}\n                      ลองติจูด\n                    </label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"ลองติจูด\"\n                      value={props.coords.longitude.toFixed(4)}\n                      disabled\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"InputMember\" className=\"col-form-label\">\n                      {\" \"}\n                      สถานที่ {location.isvalid}\n                    </label>\n                    <input\n                      type=\"text\"\n                      // className=\"form-control\"\n                      className={classNames(\"form-control\", {\n                        \"form-control is-invalid\": location.isvalid === false\n                      })}\n                      placeholder=\"สถานที่\"\n                      value={location}\n                      onChange={(e) => setLocation(e.target.value)}\n                    />\n                  </div>\n                </form>\n              </Modal.Body>\n              <Modal.Footer className=\"modal-footer justify-content-between p-0\">\n                <Button variant=\"secondary\" onClick={handleClose}>\n                  ปิด\n                </Button>\n                <Button\n                  variant=\"primary\"\n                  onClick={(e) => handleSubmit(e)}\n                  disabled={location === \"\" ? true : false}\n                >\n                  บันทึก\n                </Button>\n              </Modal.Footer>\n            </Modal>\n          </div>\n        </div>\n      ) : (\n        <div className=\"col-12\" style={{ textAlign: \"center\" }}>\n          <ScanInOutMessage\n            msg=\"--- กำลังค้นหาตำแหน่ง &hellip; ---\"\n            alert=\"alert alert-info\"\n          />\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default geolocated({\n  positionOptions: {\n    enableHighAccuracy: false\n  },\n  userDecisionTimeout: 5000\n})(LocactionAdd);\n","import React, { useEffect } from \"react\";\nimport Swal from \"sweetalert2\";\nimport LocactionList from \"./LocactionList\";\nimport LocactionAdd from \"./LocactionAdd\";\n// import AuthService from \"../../../../managers/AuthService\";\n\nimport { useDispatch } from \"react-redux\";\nimport { createLocation } from \"../../../../reduxs/actions/ScanLocation\";\nimport { profile as Profile } from \"../common/profile\";\n\nfunction Locaction() {\n  const dispatch = useDispatch();\n  // const Auth = new AuthService(\"http://localhost:3000/\");\n\n  // Confirm From Search\n  const onConfirm = (latitude, longitude, location) => {\n    const data = {\n      lat: latitude,\n      lon: longitude,\n      scanName: location\n    };\n    let Create = new Promise(function (resolve, reject) {\n      async function createMsg() {\n        return await dispatch(createLocation(data)).then((res) => {\n          return res[0].msg;\n        });\n      }\n      // get result by function\n      (async function () {\n        let resStatus = await createMsg();\n        if (resStatus === \"created successful\") {\n          setTimeout(() => {\n            window.location.reload();\n          }, 1600);\n          resolve(true);\n        } else {\n          reject(false);\n        }\n      })();\n    });\n\n    // promiss status and msg\n    Create.then((status) => {\n      status\n        ? Swal.fire({\n            // position: \"top-center\",\n            icon: \"success\",\n            title: \"สำเร็จ\",\n            text: \"ลงทะเบียนจุดสแกนเรียบร้อย\",\n            showConfirmButton: false,\n            timer: 1500\n          })\n        : Swal.fire({\n            // position: \"top-center\",\n            icon: \"warning\",\n            title: \"ผิดพลาด\",\n            text: \"ลงทะเบียนผิดพลาด\",\n            showConfirmButton: false,\n            timer: 1500\n          });\n    }).catch((e) => {\n      Swal.fire({\n        // position: \"top-center\",\n        icon: \"error\",\n        title: \"ผิดพลาด\",\n        text: \"ลงทะเบียนผิดพลาด\",\n        showConfirmButton: false,\n        timer: 1500\n      });\n    });\n  };\n\n  useEffect(() => {}, []);\n\n  return (\n    <section className=\"content\" style={{ marginTop: -16 }}>\n      <div className=\"container-fluid\">\n        <Profile />\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <div className=\"card\">\n              <div className=\"card-body \">\n                <LocactionAdd confirm={onConfirm} />\n                <LocactionList />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nexport default Locaction;\n","import React from \"react\";\nimport LocactionComponent from \"../components/locaction/Locaction\";\nfunction Locaction() {\n  return (\n    <div>\n      <LocactionComponent />\n    </div>\n  );\n}\n\nexport default Locaction;\n","import decode from \"jwt-decode\";\nimport sign from \"jwt-encode\";\n\nexport default class AuthService {\n  loggedIn() {\n    // Checks if there is a saved token and it's still valid\n    const token = this.getToken(); // GEtting token from localstorage\n    return !!token; // handwaiving here\n  }\n\n  setToken(data) {\n    const secret = \"secret\";\n    const jwt = sign(data, secret);\n    // Saves user token to localStorage\n    localStorage.setItem(\"id_token\", jwt);\n  }\n  getToken() {\n    // Retrieves the user token from localStorage\n    return localStorage.getItem(\"id_token\");\n  }\n  getProfile() {\n    // Using jwt-decode npm package to decode the token\n    return decode(this.getToken());\n  }\n}\n","import React from \"react\";\nimport AuthService from \"../../../../managers/AuthService\";\nexport const profile = () => {\n  const Auth = new AuthService(\"http://localhost:3000/\");\n  return (\n    <div className=\"row\">\n      <div className=\"col-12\">\n        <div className=\"card\">\n          <div className=\"card-body\" style={{ textAlign: \"center\" }}>\n            <span className=\"text-muted\">\n              <i className=\"fas fa-user\" />{\" \"}\n              {!Auth.loggedIn() ? \"\" : Auth.getProfile().name}\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"sourceRoot":""}